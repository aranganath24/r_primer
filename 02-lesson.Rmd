# Loading data

```{r, echo=-1}
setwd("/Users/adra7980/Documents/git_repositories/r_primer/workshop_data")
# Read in persson and tabellini dataset
persson_tabellini_original<-read_csv("persson_tabellini_workshop.csv")
```

```{r}
# Make a copy of the dataset so we don't alter the original dataset; then, view
# the copied dataset 
pt_copy<-persson_tabellini_original
```

```{r}
# Print contents of "pt_copy"
pt_copy
```

```{r}
View(pt_copy)
```

```{r, echo=FALSE}
kable(head(pt_copy))
```

# Summary statistics

## Generating a table of summary statistics

```{r}
# Generate summary statistics for "pt_copy" and assign to new object named "pt_copy_summarystats1"
pt_copy_summarystats1<-describe(pt_copy)
```

```{r}
# Print contents of "pt_copy_summarystats1"
pt_copy_summarystats1
```

```{r, echo=F}
kable(head(pt_copy_summarystats1))
```

## Exporting a summary statistics table as a CSV file

```{r}
# add rownames to pt_copy_summarystats1
pt_copy_summarystats1$variable<-rownames(pt_copy_summarystats1)

# make "variables" field the first one in the dataset
pt_copy_summarystats1<-pt_copy_summarystats1 %>% relocate(variable)
```

```{r}
# write out summary statistics table as CSV file
write_csv(pt_copy_summarystats1, "/Users/adra7980/Documents/git_repositories/r_primer/written_data/pt_copy_summarystats1.csv")
```

## Using ```stargazer``` to create and export summary statistics with

```{r}
# Make the summary stats into a data frame
pt_copy_df<-as.data.frame(pt_copy)
```

```{r, results=FALSE}
# Use stargazer to export summary statistics as a text file
stargazer(pt_copy_df, type="text", title="Descriptive Statistics", digits=1, out="summary_stats.txt")
```

```{r, results=FALSE}
# Use stargazer to export summary statistics as an html file
stargazer(pt_copy_df, type="text", title="Descriptive Statistics", digits=1, out="summary_stats.html")

```

## Summary statistics and grouping variables

### Subsetting summary statistics by group with the ```describe``` function

```{r}
# Option 1
summary_stats_by_continent<-describeBy(pt_copy, pt_copy$continent)
```

```{r}
# Accessing continent-level summary statistics for africa from the "summary_stats_by_continent" list
summary_stats_by_continent[["africa"]]
```

```{r}
# Accessing continent-level summary statistics for africa from the "summary_stats_by_continent" list; alternate syntax
summary_stats_by_continent %>% pluck("africa")
```

```{r}
# Group-level summary statistics can be assigned to their own object for easy retrieval
asia_europe_summary_statistics<-summary_stats_by_continent %>% pluck("asiae")
```

```{r}
# retrieve summary statistics for Asia/Europe 
asia_europe_summary_statistics
```

The "vars" column in the summary statistics table is an index variable; it can be removed with the following:


```{r}
# removes "vars" indexing variable from "asia_europe_summary_statistics"
asia_europe_summary_statistics<-asia_europe_summary_statistics %>% select(-vars)
```

```{r}
asia_europe_summary_statistics
```

### Generating group-level summary statistics with the ```summarize``` function from ```dplyr``` 

```{r}
# Generate a table that displays summary statistics for trade at the continent level and assign to object named "trade_age_by_continent"
trade_age_by_continent<-pt_copy %>% group_by(continent) %>% 
                                    summarise(meanTrade=mean(trade),sdTrade=sd(trade),
                                              meanAge=mean(age), sdAge=sd(age),
                                              n=n())
```

```{r}
# prints contents of "trade_age_by_continent"
trade_age_by_continent
```

## Generating crosstabs

### Crosstabs with ```tabyl```

```{r}
crosstab_federal_continent<-pt_copy %>% tabyl(federal, continent)

crosstab_federal_continent
```


```{r}
crosstab_majoritarian_continent<-pt_copy %>% tabyl(maj, continent)

crosstab_majoritarian_continent
```


```{r}
pt_copy %>% tabyl(maj, continent)
```

### Crosstabs with ```tbl_cross```

```{r}
tbl_cross(pt_copy, row=maj, col=continent)
```

```{r}
tbl_cross(pt_copy, row=federal, col=continent)
```

# Basic Data Cleaning and Preparation Tasks

## Rearranging columns

```{r}
pt_copy
```

```{r}
# bring the "country" column to the front of the dataset
pt_copy<-pt_copy %>% relocate(country)
pt_copy
```

```{r}
pt_copy<-pt_copy %>% relocate(country, list, oecd)

pt_copy
```

## Renaming variables

```{r}
## Renaming a variable (renames "list" to "party_list")
pt_copy<-pt_copy %>% rename(party_list=list)

pt_copy
```

















